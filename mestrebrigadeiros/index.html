<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Card√°pio Digital</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <!-- Splash Screen / Loading -->
    <div id="loading" class="loading-screen">
        <img src="LOGODIPFOOD.png" alt="Logo da Loja" class="loading-logo">
        <div class="spinner"></div>
        <p>Carregando card√°pio...</p>
    </div>

    <!-- Closed Message -->
    <div id="closed-message" class="closed-message hidden">
        <img src="LOGODIPFOOD.png" alt="Logo da Loja" class="closed-logo">
        <h1>Loja Fechada</h1>
        <p>Desculpe, nossa loja est√° fechada no momento.</p>
        <p>Hor√°rio de funcionamento: <span id="opening-hours"></span></p>
        <p>Aguardamos seu pedido em breve!</p>
    </div>

    <!-- Main Content -->
    <div id="main-content" class="main-content hidden">
        <header class="header">
            <div class="header-content">
                <img src="LOGODIPFOOD.png" alt="Logo da Loja" class="company-logo">
                <div class="store-info-container">
                    <h1 id="store-name">Carregando...</h1>
                    <p id="store-info">Carregando informa√ß√µes...</p>
                    <p id="estimated-pickup-time-display" class="estimated-time"></p>
                    <p id="estimated-delivery-time-display" class="estimated-time"></p>
                </div>
            </div>
        </header>

        <nav class="categories-nav">
            <div id="categories" class="categories-list">
                <!-- Categories will be loaded here -->
            </div>
        </nav>

        <main class="products-container">
            <div id="products" class="products-grid">
                <!-- Products will be loaded here -->
            </div>
        </main>

        <aside id="cart-summary" class="cart-summary hidden">
            <h2>Seu Pedido</h2>
            <div id="cart-items" class="cart-items">
                <!-- Cart items will be loaded here -->
            </div>
            <div class="cart-total-container">
                <span>Total:</span>
                <span class="total-amount">R$ <span id="cart-total">0,00</span></span>
            </div>
            <div class="cart-actions">
                <button id="clear-cart" class="btn-secondary">Limpar Carrinho</button>
                <button id="checkout-btn" class="btn-primary">Finalizar Pedido</button>
            </div>
        </aside>
    </div>

    <!-- Product Detail Modal -->
    <div id="product-detail-modal" class="modal">
        <div class="modal-content product-detail-content">
            <span class="close">&times;</span>
            <h2 id="detail-product-name"></h2>
            <img id="detail-product-image" src="/placeholder.svg?height=200&width=200" alt="Product Image">
            <p id="detail-product-description"></p>
            <div class="product-detail-price">R$ <span id="detail-product-price"></span></div>
            
            <div class="addons-section">
                <h3>Acr√©scimos</h3>
                <div id="product-addons-list" class="addons-list">
                    <!-- Addons will be loaded here -->
                </div>
            </div>

            <div class="quantity-control">
                <button onclick="updateDetailQuantity(-1)">-</button>
                <span id="detail-quantity">1</span>
                <button onclick="updateDetailQuantity(1)">+</button>
            </div>
            <button id="add-to-cart-from-detail" class="btn-primary">Adicionar ao Carrinho</button>
        </div>
    </div>

    <!-- Checkout Modal -->
    <div id="checkout-modal" class="modal">
        <div class="modal-content checkout-content">
            <span class="close">&times;</span>
            <h2>Finalizar Pedido</h2>
            <div id="checkout-items" class="checkout-items">
                <!-- Checkout items will be loaded here -->
            </div>
            <div class="checkout-summary">
                <div class="summary-line">
                    <span>Subtotal:</span>
                    <span>R$ <span id="checkout-subtotal">0,00</span></span>
                </div>
                <div id="delivery-fee-line" class="summary-line" style="display: none;">
                    <span>Taxa de Entrega:</span>
                    <span>R$ <span id="checkout-delivery-fee">0,00</span></span>
                </div>
                <div class="summary-line total-line">
                    <span>Total:</span>
                    <span>R$ <span id="checkout-total">0,00</span></span>
                </div>
            </div>

            <form id="checkout-form">
                <h3>Seus Dados</h3>
                <div class="form-group">
                    <label for="customer-name">Nome:</label>
                    <input type="text" id="customer-name" required>
                </div>
                <div class="form-group">
                    <label for="customer-phone">Telefone (WhatsApp):</label>
                    <input type="tel" id="customer-phone" placeholder="(XX) XXXXX-XXXX" required>
                </div>
                <div class="form-group">
                    <label for="delivery-type">Tipo de Pedido:</label>
                    <select id="delivery-type" required>
                        <!-- Options will be loaded by JS -->
                    </select>
                </div>
                <div id="address-group" class="form-group" style="display: none;">
                    <label for="customer-address">Endere√ßo de Entrega:</label>
                    <input type="text" id="customer-address" placeholder="Rua, N√∫mero, Bairro, Complemento">
                </div>
                <div class="form-group">
                    <label for="payment-method">M√©todo de Pagamento:</label>
                    <select id="payment-method" required>
                        <option value="">Selecione...</option>
                        <option value="pix">PIX</option>
                        <option value="money">Dinheiro</option>
                        <option value="card">Cart√£o</option>
                    </select>
                </div>
                <div id="pix-info" class="payment-info" style="display: none;">
                    <p>Chave PIX: <strong id="pix-key"></strong></p>
                    <p>Envie o comprovante para nosso WhatsApp ap√≥s o pagamento.</p>
                </div>
                <div id="change-info" class="payment-info" style="display: none;">
                    <label for="change-for-amount">Precisa de troco para quanto?</label>
                    <input type="number" id="change-for-amount" step="0.01" min="0" placeholder="Deixe em branco se n√£o precisar">
                </div>
                <button type="submit" class="btn-primary">Confirmar Pedido</button>
            </form>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="success-modal" class="modal">
        <div class="modal-content success-content">
            <h2>üéâ Pedido Realizado com Sucesso!</h2>
            <p>Seu pedido #<span id="order-number"></span> foi enviado para a loja.</p>
            <p>Acompanhe o status pelo WhatsApp.</p>
            <button id="new-order-btn" class="btn-primary">Fazer Novo Pedido</button>
        </div>
    </div>

    <script src="tenant-resolver.js"></script>
    <script src="scripts-updated.js"></script>
</body>
</html>
